% Basic packages

\usepackage{graphicx}
\usepackage[breaklinks, colorlinks, urlcolor=blue, citecolor=blue, linkcolor=blue]{hyperref}

% Skips between pars rather than indents at their beginnings; works better for
% this kind of document, I think:

\usepackage[parfill]{parskip}


% Page setup.

\usepackage[letterpaper, includehead, margin=1in, top=0.5in, headheight=15pt]{geometry}
\usepackage{fancyhdr}
\pagestyle{fancyplain}
\fancyhf{}
\fancyhead[LE, RO]{\thepage}
\fancyhead[LO, RE]{\textsf{\leftmark}}


% Fonts. Note that EB Garamond has no bold, alas!

\usepackage{fontspec}
\newfontfeature{Microtype}{protrusion=default; expansion=default;}

\setmainfont[
  Microtype,
  Ligatures = Common,
  Extension = .otf,
  UprightFont = *-Regular,
  ItalicFont = *-Italic
]{EBGaramond12}

\setmonofont[
  Scale = MatchLowercase,
  Ligatures = Common,
  Extension = .otf,
  UprightFont = *-Regular,
  BoldFont = *-Bold,
  ItalicFont = *-RegularIt,
  BoldItalicFont = *-BoldIt,
]{SourceCodePro}


% Sectioning.

\usepackage{titlesec}
\titleformat{\section}{\sffamily\Large\bfseries}{Hands-on \#\thesection:}{1ex}{}
\titleformat{\subsection}{\sffamily\large\bfseries}{\thesubsection}{1em}{}
\titleformat{\subsubsection}{\sffamily\normalsize\bfseries}{\thesubsubsection}{1em}{}
\titlespacing*{\section}{0pt}{2.5ex plus 1ex minus 0.2ex}{1ex plus 0.2ex}
\titlespacing*{\subsection}{0pt}{2ex plus 0.8ex minus 0.2ex}{1ex plus 0.1ex}
\titlespacing*{\subsubsection}{0pt}{3.25ex plus 1ex minus 0.2ex}{1.5ex plus 0.2ex}

\renewcommand\sectionmark[1]{\markboth{#1}{}} % needed for good headers.


% Title formatting
\usepackage{titling}
\pretitle{\begin{center}\Huge}
\posttitle{\end{center}}


% Miscellaneous small macros.

\let\b=\textbf
\let\i=\textit
\let\s=\textsf
\let\t=\texttt

\newcommand\ie{\i{i.e.}}




% (INHERITED FROM GIT LAB): The question-to-answer environment. Derived from
% `leftbar` environment of `framed` package. We just make the rule thinner.

%%%\usepackage{framed}
%%%
%%%\newcommand\fillme[2]{%
%%%  \bigskip%
%%%  \begingroup%
%%%  \def\FrameCommand{\vrule width 1pt \hspace{10pt}}%
%%%  \MakeFramed {\advance\hsize-\width \FrameRestore}%
%%%  \i{#2}\rule[-#1]{0in}{#1}%
%%%  \endMakeFramed%
%%%}


% (INHERITED FROM GIT LAB): The commands-to-type environment

%%%\usepackage{tabularx} % for \prompt
%%%\usepackage[table]{xcolor} % for \prompt
%%%\newenvironment{typeme}{%
%%%  \tabularx{6.5in}{>{\columncolor{lightgray}\ttfamily\$ }X>{\sffamily}l}
%%%}{%
%%%  \endtabularx%
%%%}
%%%\newcommand\typeone[2]{%
%%%  \begin{typeme}%
%%%  #1 & #2%
%%%  \end{typeme}%
%%%}
%%%\newcommand\fillinparam[1]{\textsf{\textbf{\{#1\}}}}
%%%\let\p=\fillinparam


% Syntax highlighting of code.
\usepackage{listings}
\lstset{%
  language = Python,
  gobble = 2,
  xleftmargin = 20pt,
  xrightmargin = 20pt,
  frame = tb,
  aboveskip = \bigskipamount,
  basicstyle = \ttfamily,
  showstringspaces = false,
}%


% Needed for \pmb (poor man's bold) for control-flow section.
\usepackage{amsmath}


% Simple environment calling out something the student needs to do. Styling is
% intentionally similar to that produced by lstlistings to help convey that
% any code that appears should be typed in.

\usepackage{dashrule}
\newlength{\actionparwidth}

\newenvironment{action}{%
 \leftskip=20pt%
 \rightskip=20pt%
 \setlength{\actionparwidth}{\linewidth}%
 \addtolength{\actionparwidth}{-40pt}%
 \hdashrule{\actionparwidth}{1pt}{2pt}%
}{%
 \par \nointerlineskip \noindent%
 \hspace*{\leftskip}%
 \hdashrule{\actionparwidth}{1pt}{2pt}%
}


% Commands-to-type environment, taken from the Git Lab. Only used in a couple
% of places here.

\usepackage{tabularx} % for \prompt
\usepackage[table]{xcolor} % for \prompt

\newenvironment{typeme}{%
  \tabularx{6.5in}{>{\columncolor{lightgray}\ttfamily\$ }X>{\sffamily}l}
}{%
  \endtabularx%
}

\newcommand\typeone[2]{%
  \begin{typeme}%
  #1 & #2%
  \end{typeme}%
}

\newcommand\fillinparam[1]{\textsf{\textbf{\{#1\}}}}
\let\p=\fillinparam


% Import the current Git version -- generated by Ninja
\input gitversion
