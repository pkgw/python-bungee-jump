<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>A Python Bungee Jump</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="reveal/reveal.css">
    <link rel="stylesheet" href="katex/katex.min.css">
    <link rel="stylesheet" href="pkgwtheme.css" id="theme">
    <script>
      if (window.location.search.match(/print-pdf/gi)) {
        document.write('<link rel="stylesheet" href="reveal/print-pdf.css" type="text/css" media="print">');
      }
      if (window.location.search.match(/bbdebug/gi)) {
        document.write('<style>.reveal .slides section.present { outline: 2px solid red; outline-offset: 0px; }</style>');
      }
    </script>
  </head>

  <body>
    <div class="reveal">
      <div class="slides">

        <section>
          <h1 class="maintitle1">A Python Bungee Jump</h1>

          <div class="w30 ctr">
            <img data-src="assets/hera_logo.svg">
          </div>

          <div class="footer">
            <p>Peter K. G. Williams (CfA) •
              <a href="https://twitter.com/pkgw">@pkgw</a> •
              <a href="http://newton.cx/~peter/">http://newton.cx/~peter/</a>
            </p>
            <p style="font-size: 0.8em; margin-top: 0.7em">
              CHAMP Camp · Sante Fe, NM, USA · 2018 Jun 12
            </p>
          </div>
        </section>


        <section>
          <h1 class="titlecard">1. Foundations</h1>
        </section>

        <section>
          <h2>Code is math.</h2>

          <p>Programs perform <i>computations</i> by
            implementing <i>algorithms</i>.</p>

          <p>It is possible for algorithms to be <i>provably correct</i> and
            to describe precisely how efficient they are.</p>

          <p>It is possible to write programs that <i>never fail</i>.</p>

          <p>Algorithms need not execute on CPUs. E.g., knitting.</p>
        </section>

        <section>
          <h2>Code is engineering.</h2>

          <p>Programs are written to perform useful tasks.</p>

          <p>They are produced in the context of requirements, schedules, and
            budgets.</p>

          <p>The justifiable investment in a program scales with how much
            value it generates: how often it is run, the costs if it
            fails.</p>

          <p>(This is why we’re teaching you Python 2 and not Python 3.)</p>
        </section>

        <section>
          <h2>Code is a language.</h2>

          <p>There are both syntax and semantics.</p>

          <p>There are idioms and clichés.</p>

          <p>You gain fluency over time.</p>

          <p>You won’t learn to write well without reading a lot!
            A <i>lot</i>.</p>
        </section>

        <section>
          <h2>Code is an edifice of human culture.</h2>

          <p>Every program exists in some engineered context: a CPU, knitting
            needles and yarn, …</p>

          <p>These contexts are as rich as any other human endeavors: they
            have histories, factions, fads, masterpieces, and so on.</p>

          <p>It is hard to say how important it is to understand this
            context.</p>

          <p>But: bad programs often go “against the grain” of the context in
            which they operate.</p>
        </section>

        <section>
          <h2>Why do we write code?</h2>

          <ol>
            <li>To <i>automate</i> and <i>accelerate</i> tedious tasks.</li>
            <li>To make computations <i>reproducible</i>
              and <i>auditable</i>.</li>
          </ol>
        </section>


        <section>
          <h1 class="titlecard">2. Data Structures</h1>
        </section>

        <section>
          <h2>Programs are made of <i>code</i> and <i>data</i>.</h2>

          <p>There is as much subtlety in designing your data as there is in your code!</p>

          <div class="w70 ctr">
            <img data-src="assets/code-data.svg" class="w100">
          </div>
        </section>

        <section>
          <h2>Every language has <i>types</i> of data.</h2>

          <p>Python provides “core” types:</p>

          <ul class="squish">
            <li>The “None” type: an empty or undefined value</li>
            <li>Booleans (“bools”): true/false values</li>
            <li>Integers</li>
            <li>“Floats”: approximations of real numbers</li>
            <li>“Strings”: text — sequences of characters</li>
          </ul>

          <p class="mt1">It also has <i>collections</i> for making <i>data
          structures</i>:</p>

          <ul class="squish">
            <li>Lists</li>
            <li>Sets</li>
            <li>Dictionaries (“dicts”)</li>
            <li><i>Objects</i>, to be explored later</li>
          </ul>
        </section>

        <section>
          <h2>Variables are <i>names</i> for data.</h2>

          <p>Variable assignment in Python is totally standard, and also
            totally weird if you’re not used to it:</p>

          <p class="w80 ctr"><tt>x = 1</tt></p>

          <p>In Python it is important to distinguish between a piece of data
            itself and the name used to refer to it.</p>

          <pre>a = ['list', 'of', 'words']
b = a
b[1] = 'new'
<b>print</b> a[1]</pre>

          <p><i>Indirection</i> is tricky and comes up <i>all over</i>.</p>
        </section>

        <section>
          <h2><i>Mutable</i> data have pitfalls.</h2>

          <p>The trip-up in the previous slide only happened because the data
            underlying <i>a</i> could be modified.</p>

          <p>Mutations are relatively easy to keep track of in simple, linear
            programs.</p>

          <p>Avoiding mutability makes it <i>much</i> easier to build complex
            software systems.</p>
        </section>


        <section>
          <h1 class="titlecard">3. Control Flow</h1>
        </section>

        <section>
          <h2>Real programs don’t run linearly.</h2>

          <p>Our first examples ran commands strictly in sequence.</p>

          <p>Most real programs have to make choices or run loops. The
            geometry of these <i>branches</i> define its <i>control
            flow</i>.</p>

          <p>Python provides a very standard set of statements for managing
            control flow.</p>
        </section>

        <section>
          <h2><tt>if</tt> statements are universal.</h2>

          <p>They only run a certain block of statements if a certain
            expression evaluates to a “truthy” value.</p>

          <pre><b>if</b> x &gt; 4:
    x = 4
    <b>print</b> 'Capped x.'
<b>print</b> x</pre>

          <p>Python groups statements into <i>blocks</i> by looking at their
            indentation!!! Most languages don’t.</p>
        </section>

        <section>
          <h2><tt>if</tt> statements are universal.</h2>

          <p>Full generality:</p>

          <pre><b>if</b> {condition-1}:
    {block-1}
<b>elif</b> {condition-2}:
    {block-2}
...
<b>elif</b> {condition-n}:
    {block-n}
<b>else</b>:
    {block-(n+1)}</pre>
        </section>

        <section>
          <h2><tt>while</tt> loops are also universal.</h2>

          <p>Example:</p>

          <pre>n_iterations = 0
<b>while</b> n_iterations &lt; 10:
    do_some_stuff()
    n_iterations += 1
<b>print</b> 'Finished iterating.'</pre>
        </section>

        <section>
          <h2><tt>while</tt> loops are also universal.</h2>

          <p>Example:</p>

          <pre>total = 0
<b>while</b> True:
    x = get_next_x()
    <b>if</b> x &lt; 0:
        <b>print</b> 'Quitting'
        <b>break</b>
    <b>if</b> x &gt; 9:
        <b>print</b> 'Ignoring'
        <b>continue</b>
    total += x
<b>print</b> total</pre>
        </section>

        <section>
          <h2><tt>for</tt> loops are for containers.</h2>

          <p>Example:</p>

          <pre>a_list = [1, 1, 2, 3, 5]

<b>for</b> x <b>in</b> a_list:
    <b>print</b> x

a_dict = {'key1': 8, 'key2': 13}

<b>for</b> k <b>in</b> a_dict.keys():
    <b>print</b> k</pre>
        </section>


        <section>
          <h1 class="titlecard">4. Input and Output</h1>
        </section>

        <section>
          <h2>IO and computation are fundamentally different.</h2>

          <div class="w60 fr">
            <img data-src="assets/code-data.svg" class="w100">
          </div>

          <p>Recall the code/data schematic ⇒</p>

          <p>Computation happens inside the box.</p>

          <p>IO reaches outside the box. It is slow and errors
            are <i>always</i> possible.</p>

          <p>But: every program needs IO.</p>
        </section>

        <section>
          <h2>There are many kinds of IO.</h2>

          <ul class="w50 ctr">
            <li>Files on disk</li>
            <li>Output to the terminal</li>
            <li>Network communications</li>
            <li>Talking to hardware</li>
          </ul>

          <p class="mt1">The OS provides abstractions so that you can use the
            same techniques to work with all of these.</p>

          <p>But often you need to understand how they work under the
            hood.</p>
        </section>

        <section>
          <h2>Low-level IO centers on <i>byte streams</i>.</h2>

          <p>(<i>Byte</i>: ordered group of eight booleans [bits]<br>⇒
            2<sup>8</sup> possible combinations<br>⇒ interpretable as an integer
            between 0 and 255.)</p>

          <p><i>Stream</i>, empirically: something that lets you read or write
            a “next” batch of bytes.</p>

          <p>Often valuable, and sometimes easier, to process data in a
            streaming paradigm.</p>

          <p>But: when reading and writing data, use higher-level
            abstractions!</p>
        </section>

        <section>
          <h2>Python has many ways to do IO.</h2>

          <p>Special data — <i>file-like objects</i> — represent byte
            streams.</p>

          <p>Simplest way to do output: <tt>print</tt> statement
            for <i>line-oriented text</i>.</p>

          <p>Beyond that: <i>there’s no simple answer</i>. But there are many
            options. Use them instead of rolling your own!</p>
        </section>


        <section>
          <h1 class="titlecard">5. Managing Complexity: Functions &amp; Modules</h1>
        </section>

        <section>
          <h2>Managing complexity is hard.</h2>

          <p>Modern programming languages don’t just give you tools to perform
            computations and IO.</p>

          <p>They spend just as much effort to give you tools to manage the
            complexity of large programs.</p>

          <p>The name of the game is breaking a big task into
            smaller, <i>composable</i> pieces.</p>

          <p>Much of “learning how to code” is learning how to divide problems
            into solvable sub-problems.</p>
        </section>

        <section>
          <h2>Functions help manage complexity.</h2>

          <pre><b>def</b> factorial(n):
    <b>if</b> n == 0: # ← equality test
        <b>return</b> 1
    <b>return</b> n * factorial(n - 1)

<b>print</b> factorial(5)</pre>

          <p>Functions are tools for:</p>

          <ol>
            <li><i>Encapsulation</i></li>
            <li>Preventing <i>code duplication</i></li>
            <li>Control flow management</li>
          </ol>

        </section>

        <section>
          <h2>Functions are variables too.</h2>

          <p>We lied: code is data.</p>

          <pre><b>def</b> make_a_multiplier(k):
    <b>def</b> multiply_by_k(x):
        <b>return</b> k * x
    <b>return</b> multiply_by_k

multiply_by_5 = make_a_multiplier(5)
<b>print</b> multiply_by_5(3)</pre>
        </section>

        <section>
          <h2>Organize Python code with <i>modules</i>.</h2>

          <p>Modules encapsulate related code and data.</p>

          <p>A module is a single file of Python code.</p>

          <p>When you <i>import</i> a module, the code is run and the
            resulting variables are made available to you.</p>

          <p>You can’t import two “different versions” of the same module.</p>
        </section>

        <section>
          <h2>Modules are also variables.</h2>

          <p>Their contents are once again accessed with “dot notation”.</p>

          <pre><b>import</b> sys
<b>print</b> sys.path
also_sys = sys

<b>import</b> os.path
<b>import</b> numpy <b>as</b> np
<b>from</b> astropy.io <b>import</b> ascii, fits</pre>
        </section>

        <section>
          <h2>Modules are for code <i>distribution</i> too.</h2>

          <p>Virtually all modern software relies on <i>library</i> code.</p>

          <p>Virtually all modern languages consist of a <i>core</i> plus
            a <i>standard library</i>.</p>

          <p>Python libraries are distributed as <i>packages</i> providing one
            or more modules.</p>

          <p>Python’s package ecosystem is ungainly, but there’s a package for
            everything.</p>

          <p>The <i>pip</i> and <i>conda</i> tools are similar but different.
            It is important to learn how to use them.</p>
        </section>


        <section>
          <h1 class="titlecard">6. Managing Complexity: Classes</h1>
        </section>

        <section>
          <h2>You can create your own data types.</h2>

          <p>You can define a new <i>class</i> that combines data and
            methods.</p>

          <p>You can then create one or more <i>instances</i> of that
            class.</p>

          <p>Anything that can be assigned to a variable in Python is an
            instance of some class.</p>
        </section>

        <section>
          <h2>Here’s a typical class definition.</h2>

          <pre><b>class</b> Counter(object):
    value = 0

    <b>def</b> increment(self):
        self.value += 1

    <b>def</b> get(self):
        return self.value

my_counter = Counter()
my_counter.increment()
<b>print</b> my_counter.get()</pre>
        </section>

        <section>
          <h2>Custom types are a complexity tool.</h2>

          <p>Classes are like “mini modules”: a tool for encapsulating related
            code and data.</p>

          <p>Also like a module: all of the code inside the <b>class</b> block
            is run, and then the resulting assignments are bundled up and made
            available.</p>

          <p>Key difference: you can have multiple instances of a class.</p>
        </section>

        <section>
          <h2>Classes often have <i>constructors</i>.</h2>

          <p>This is usually problematic:</p>

          <pre><b>class</b> Counters(object):
    values = [0, 0, 0]
    ...</pre>

          <p>Instead:</p>

          <pre><b>class</b> Counters(object):
    <b>def</b> __init__(self, n_items):
        self.values = [0] * n_items

    ...</pre>
        </section>

        <section>
          <h2>Python’s class system is elaborate.</h2>

          <p>For instance, it has <i>inheritance</i>, where one class derives
            from another:</p>

          <pre><b>class</b> MyDictionary(dict):
    ...</pre>

          <p>You will not often need to use inheritance.</p>

          <p>There are many magic
            functions: <tt>__eq__</tt>, <tt>__getattr__</tt>, …</p>

          <p>As ever: at some point you should read the detailed rules.</p>
        </section>

        <section>
          <h2>Manage <i>statefulness</i> in your classes.</h2>

          <p>Classes make it easy to introduce <i>hidden state</i>.</p>

          <pre><b>class</b> MyClass(object):
    mood = 'nice'
    <b>def</b> turn_mean(self):
        self.mood = 'mean'
    <b>def</b> do_something(self):
        <b>if</b> self.mood == 'nice':
            <b>print</b> 'Hello!'
        <b>else</b>:
            sys.delete_all_files()
...
my_instance.do_something() # ????</pre>
        </section>


        <section>
          <h1 class="titlecard">7. Error Handling</h1>
        </section>

        <section>
          <h2>There are four kinds of errors.</h2>

          <ol>
            <li>Syntax errors</li>
            <li>Implementation errors</li>
            <li>Design errors</li>
            <li>Environmental errors</li>
          </ol>

          <p>A perfect coder could avoid the first three, but <i>all</i> real
            programs are subject to environmental errors.</p>
        </section>

        <section>
          <h2>Python uses an <i>exception</i> paradigm.</h2>

          <p>Errors cause the control flow to jump to special <i>except
              blocks</i> that you can provide.</p>

          <p>If no appropriate except block is available, the program aborts.</p>

          <p><i>This paradigm is weak</i> because it makes error handling very
            implicit, but it has its virtues.</p>
        </section>

        <section>
          <h2>Python exceptions are data too.</h2>

          <p>They are instances of the <tt>Exception</tt> class, or one of its
            inherited <i>sub-classes</i>.</p>

          <pre><b>try:</b>
    do_some_io(file_name)
    do_more_io(file_name)
<b>except</b> IOError <b>as</b> e:
    <b>print</b> 'Uh-oh:', (e, file_name)
    <b>raise</b>

<b>print</b> 'We made it to here.'</pre>
        </section>

        <section>
          <h2>Don’t “handle” an error by ignoring it.</h2>

          <p>It is tempting to write:</p>

          <pre><b>try:</b>
    big_chunk_of_code()
<b>except</b> Exception <b>as</b> e:
    <b>print</b> 'Error:', e</pre>

          <p class="tctr tbig" style="color: #F00"><i>DO NOT DO THIS!!!!</i></p>

          <p>Exceptions signify <i>major failures</i>. Only ignore them
            in <i>tightly-controlled conditions</i>.</p>

          <p>Exceptions come with lots of meta-data. Printing them yourself
            loses the information.</p>
        </section>

        <section>
          <h2>Handle exceptions narrowly.</h2>

          <p>Isolate the specific lines that might fail, and catch a specific
            error type:</p>

          <pre><b>try:</b>
    <b>import</b> scipy
    have_scipy = True
<b>except</b> ImportError:
    have_scipy = False</pre>
        </section>

        <section>
          <h2>Fix your bugs.</h2>

          <p>Try/except statements are for environmental errors: the ones you
            can’t prevent.</p>

          <p>Solve other kinds of errors by <i>fixing your code</i>! Or by
            using more appropriate tools. Not:</p>

          <pre><b>try:</b>
    v = mydict[keyname]
<b>except</b> KeyError:
    v = 0</pre>

          <p>Instead:</p>

          <pre>v = mydict.get(keyname, 0)</pre>
        </section>

        <section>
          <h2>Turn exceptions into error codes.</h2>

          <p>Exception data do not “serialize” well.</p>

          <p>When recording whether an operation was successful or not,
            recall <i>Anna Karenina</i>:</p>

          <p class="tital tctr">“Happy families are all alike; every unhappy
            family is unhappy in its own way.”</p>

          <p>A small taxonomy of errors is usually useful:</p>

          <pre>SUCCESS = 0
CONVERGENCE_ERROR = 1
IO_ERROR = 2
...</pre>
        </section>


        <section>
          <h1 class="titlecard">8. Conclusion</h1>
        </section>

        <section>
          <h2 class="tctr tital">Recap.</h2>

          <p>We’ve covered a lot of ground today!</p>

          <ul>
            <li>Basic data types</li>
            <li>Conditionals, loops</li>
            <li>Input and output</li>
            <li>Functions</li>
            <li>Modules</li>
            <li>Classes</li>
            <li>Exceptions</li>
          </ul>
        </section>

        <section>
          <h2 class="tctr tital">Some parting thoughts.</h2>

          <p>As you learn to code, there will be frustrating days.</p>

          <p>Don’t feel bad about that! Software is subtle and there are
            lifetimes’ worth of ideas to master.</p>

          <p>Don’t cut us any slack, either! It is harder to learn to code
            than it should be, and we should fix that.</p>

          <p class="tctr mt1"><i>Thanks for your attention!</i></p>

          <p class="tctr">Peter K. G. Williams<br>
            <a href="https://twitter.com/pkgw">@pkgw</a> •
            <a href="http://newton.cx/~peter/">http://newton.cx/~peter/</a>
          </p>

          <div style="position: absolute; bottom: 0; font-size: 0.5em; width: 100%">
            <p>
              <em>HTML talk info</em>:
              <a href="http://tinyurl.com/htmltalk">http://tinyurl.com/htmltalk</a>
              •
              <em>Design credits</em>:
              <a href="http://hakim.se/">Hakim El Hattab</a> (“white” theme),
              <a href="https://twitter.com/julietulanovsky">Julieta Ulanovsky</a> (Montserrat font),
              <a href="http://www.monotypeimaging.com/ProductsServices/TypeDesignerShowcase/SteveMatteson/">
                Steve Matteson</a> (Open Sans font)
              •
              <em>Tech credits</em>:
              <a href="http://git-scm.com/">git</a>,
              <a href="http://lab.hakim.se/reveal-js/">reveal.js</a>,
              <a href="https://developer.mozilla.org/">Firefox</a> developer tools.
            </p>
          </div>

      </div>
    </div>

    <script src="reveal/head.min.js"></script>
    <script src="reveal/classList.js"></script>
    <script src="reveal/reveal.js"></script>

    <script>
      Reveal.initialize({
        controls: false,
        progress: false,
        history: true,
        center: false,
        keyboard: true,
        touch: false,
        overview: true,
        mouseWheel: false,
        width: 960,
        height: 720,

        theme: false, // hardcoded with CSS import in <head>
        transition: 'none', // default/cube/page/concave/zoom/linear/fade/none
        transitionSpeed: 'default', // default/fast/slow

        dependencies: [
          { src: 'lib/katex.js', async: true },
        ],
      });
    </script>
  </body>
</html>
